<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup Label="ProjectConfigurations" Condition="'$(VisualStudioVersion)'=='10.0'">
    <ProjectConfiguration Include="Release|Win32">
      <Configuration>Release</Configuration>
      <Platform>Win32</Platform>
    </ProjectConfiguration>
    <ProjectConfiguration Include="Release|x64">
      <Configuration>Release</Configuration>
      <Platform>x64</Platform>
    </ProjectConfiguration>
  </ItemGroup>
  <PropertyGroup Label="Globals">
    <ProjectGuid>{569EEA47-BC7D-4447-A26B-50CFD48B1F81}</ProjectGuid>
  </PropertyGroup>
  <Import Project="$(SolutionDir)build.props\platform.props" />
  <PropertyGroup Label="Configuration">
    <ConfigurationType>Utility</ConfigurationType>
  </PropertyGroup>
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.props" />
  <ImportGroup Label="PropertySheets">
    <Import Project="$(SolutionDir)build.props\config.props" />
    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
  </ImportGroup>
  <PropertyGroup>
    <ExtensionsToDeleteOnClean>*.cmd;*.txt;*.cdf;*.cache;*.obj;*.ilk;*.resources;*.tlb;*.tli;*.tlh;*.tmp;*.rsp;*.pgc;*.pgd;*.meta;*.tlog;*.manifest;*.res;*.pch;*.exp;*.idb;*.rep;*.xdc;*.pdb;*_manifest.rc;*.bsc;*.sbr;*.xml;*.metagen;*.bi</ExtensionsToDeleteOnClean>
    <TargetName>micro-profiler</TargetName>
    <TargetExt>.vsix</TargetExt>
  </PropertyGroup>
  <ItemDefinitionGroup>
    <BuildLog />
    <PostBuildEvent>
      <Command>call mkzip "$(IntDir)*" "$(TargetPath)"

call "$(SolutionDir)scripts\make-version.cmd" VERSION "$(SolutionDir)version.h"

set TargetNameVer="$(TargetName)_$(PlatformShortName).v%VERSION%$(TargetExt)"

del "$(TargetDir)%TargetNameVer%"
ren "$(TargetPath)" "%TargetNameVer%"
</Command>
    </PostBuildEvent>
    <BuildLog>
      <Path>$(OutDir)\$(ProjectName).log</Path>
    </BuildLog>
    <CustomBuild>
      <Command>copy "%(FullPath)" "$(IntDir)"</Command>
      <Message>Copying %(Filename)%(Extension)...</Message>
      <Outputs>$(IntDir)%(Filename)%(Extension)</Outputs>
    </CustomBuild>
  </ItemDefinitionGroup>
  <ItemGroup>
    <CustomBuild Include="$(SolutionDir)_bin\Release_Win32\micro-profiler_x86.dll">
      <FileType>Document</FileType>
    </CustomBuild>
    <CustomBuild Include="$(SolutionDir)_bin\Release_x64\micro-profiler_x64.dll">
      <FileType>Document</FileType>
    </CustomBuild>
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\micro-profiler\micro-profiler.stub.vcxproj">
      <Project>{3b1f8640-9f9a-4989-a074-73590a82a26c}</Project>
    </ProjectReference>
    <ProjectReference Include="..\micro-profiler\micro-profiler.vcxproj">
      <Project>{d5d49128-2510-4a14-9a0f-9f8f0abad700}</Project>
    </ProjectReference>
  </ItemGroup>
  <ItemGroup>
    <CustomBuild Include="..\micro-profiler\visualstudio\vs-extension\extension.vsixmanifest">
      <FileType>Document</FileType>
      <SubType>Designer</SubType>
    </CustomBuild>
    <CustomBuild Include="..\micro-profiler\visualstudio\vs-extension\micro-profiler.pkgdef">
      <FileType>Document</FileType>
    </CustomBuild>
  </ItemGroup>
  <ItemGroup>
    <CustomBuild Include="[Content_Types].xml">
      <DeploymentContent Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">true</DeploymentContent>
      <DeploymentContent Condition="'$(Configuration)|$(Platform)'=='Release|x64'">true</DeploymentContent>
    </CustomBuild>
  </ItemGroup>
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
</Project>